<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NGO Dashboard</title>

  <!-- Global CSS Only -->
  <link rel="stylesheet" href="../../styles/global.css" />
</head>
<body>

  <!-- Header -->
  <div id="header-container"></div>

  <!-- Dashboard Content -->
  <div class="dashboard-container container">
    <h2>NGO Dashboard</h2>
    <p>Manage tasks and post volunteer requests quickly.</p>

    <!-- Toggle Button -->
    <button class="btn" id="togglePostForm">➕ Post New Task</button>

    <!-- Post Task Form (Initially Hidden) -->
    <div id="postTaskForm" class="hidden" style="margin-top: 30px;">
      <h3>Create a Task</h3>
      <form id="taskForm">
        <div class="input-group">
          <label for="taskTitle">Title</label>
          <input type="text" id="taskTitle" placeholder="e.g. Blood Donation Camp" required />
        </div>
        <div class="input-group">
          <label for="taskDesc">Description</label>
          <textarea id="taskDesc" rows="4" placeholder="Include details, timings, location..." required></textarea>
        </div>
        <button class="btn" type="submit">Post Task</button>
      </form>
    </div>

    <!-- Display Existing Tasks -->
    <div class="tasks" style="margin-top: 40px;">
      <h3>📋 Your Recent Tasks</h3>
      <div id="taskGrid" class="card-grid" style="margin-top: 20px;">
        <div class="card task-card">
          <h4>Urgent: Food Distribution</h4>
          <p>Need 3 volunteers for packing at Delhi center today 4–6 PM.</p>
        </div>
        <div class="card task-card">
          <h4>Medical Camp Support</h4>
          <p>2 volunteers needed for patient registration in Pune on 18th July.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div id="footer-container"></div>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <!-- JavaScript -->
  <script>
    // Load Header and Footer
    fetch('../../components/header.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById("header-container").innerHTML = data;
        const loginIcon = document.querySelector('.login-icon');
        if (loginIcon) loginIcon.style.display = 'none';
      });

    fetch('../../components/footer.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById("footer-container").innerHTML = data;
      });

    // Post Task Toggle Logic
    document.addEventListener("DOMContentLoaded", () => {
      const toggleBtn = document.getElementById("togglePostForm");
      const formSection = document.getElementById("postTaskForm");
      const form = document.getElementById("taskForm");
      const taskGrid = document.getElementById("taskGrid");

      toggleBtn.addEventListener("click", () => {
        formSection.classList.toggle("hidden");
        toggleBtn.textContent = formSection.classList.contains("hidden")
          ? "➕ Post New Task"
          : "✖️ Cancel";
      });

      form.addEventListener("submit", e => {
        e.preventDefault();
        const title = document.getElementById("taskTitle").value;
        const desc = document.getElementById("taskDesc").value;

        const card = document.createElement("div");
        card.className = "card task-card";
        card.innerHTML = `<h4>${title}</h4><p>${desc}</p>`;
        taskGrid.prepend(card);

        form.reset();
        formSection.classList.add("hidden");
        toggleBtn.textContent = "➕ Post New Task";
        showToast("✅ Task Posted Successfully!");
      });
    });

    // Toast Notification
    function showToast(message) {
      const toast = document.getElementById("toast");
      toast.textContent = message;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 3000);
    }
  </script>
  <script>
  fetch('../../components/header.html')
    .then(res => res.text())
    .then(data => {
      document.getElementById("header-container").innerHTML = data;

      // Hide dark mode, login, and unnecessary elements for dashboard
      document.querySelectorAll('.dashboard-hide').forEach(el => {
        el.style.display = 'none';
      });
    });
</script>


</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NGO Dashboard</title>

  <!-- External CSS -->
  <link rel="stylesheet" href="../../style/global.css" />
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/dashboard.css" />
</head>
<body>

  <!-- Header -->
  <div id="header-container"></div>

  <!-- Main Dashboard -->
  <div class="dashboard-container">

    <!-- Post Task Shortcut -->
    <div class="card-wrapper">
      <a href="post-task.html" class="card" onclick="showToast('Opening task creator...')">
        <h3>üìù Post New Task</h3>
        <p>Create a new volunteering request to match with nearby volunteers.</p>
      </a>
    </div>

    <!-- Existing Tasks -->
    <div class="tasks">
      <div class="task-card">
        <h3>Urgent: Food Distribution</h3>
        <p>Need 3 volunteers for packing at Delhi center today 4‚Äì6 PM.</p>
      </div>
      <div class="task-card">
        <h3>Medical Camp Support</h3>
        <p>2 volunteers needed for patient registration in Pune on 18th July.</p>
      </div>
    </div>

    <!-- Task Analytics -->
    <canvas id="taskChart" width="400" height="200"></canvas>

  </div>

  <!-- Footer -->
  <div id="footer-container"></div>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Dashboard Script -->
  <script src="../js/user.js"></script>

  <!-- Header & Footer Loader -->
  <script>
    fetch('../../components/header.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById("header-container").innerHTML = data;
      });

    fetch('../../components/footer.html')
      .then(res => res.text())
      .then(data => {
        document.getElementById("footer-container").innerHTML = data;
      });
  </script>

  <!-- Chart Setup -->
  <script>
    const ctx = document.getElementById('taskChart').getContext('2d');
    new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Food', 'Medical', 'Delivery', 'Tutoring'],
        datasets: [{
          label: 'Tasks by Category',
          data: [8, 14, 9, 6],
          backgroundColor: ['#6c63ff', '#ff6f61', '#28b4c8', '#ffc107']
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'right',
            labels: {
              color: getComputedStyle(document.body).getPropertyValue('--text-color') || '#333'
            }
          }
        }
      }
    });
  </script>
  <script src="../js/dashboard.js" defer></script>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("theme-toggle");
    if (!toggle) return;

    // Load theme preference
    const theme = localStorage.getItem("theme");
    if (theme === "dark") {
      document.body.classList.add("dark-mode");
      toggle.checked = true;
    }

    // Toggle logic
    toggle.addEventListener("change", function () {
      if (toggle.checked) {
        document.body.classList.add("dark-mode");
        localStorage.setItem("theme", "dark");
      } else {
        document.body.classList.remove("dark-mode");
        localStorage.setItem("theme", "light");
      }
    });
  });
</script>

</body>
</html>

